{
    "$schema": "https://json-schema.org/schema#",
    "type": "object",
    "description":"Define a set of files.",
    "definitions":{
        "file":{
            "type":"object",
            "properties":{
                "file_path":{
                    "type":"string"
                },
                "sha256_hash":{
                    "type":"string"
                },
                "last_modified_timestamp":{
                    "type":"string"
                }
            },
            "additionalProperties":false
        },
        "annotation_type":{
            "type":"object",
            "description":"An annotation attributed to a sample",
            "properties":{
                "annotation_group":{
                    "title":"Annotation Group",
                    "type":["string","null"]
                },
                "annotation_type":{
                    "title":"Annotation Type",
                    "type":"string",
                    "enum":["discrete","timepoint","batch"]
                },
                "annotation_name":{
                    "title":"Label",
                    "type":"string"
                },
                "annotation_order":{
                    "title":"Numeric Order",
                    "type":"integer"
                },
                "annotation_include":{
                    "title":"Use Annotation (default TRUE)",
                    "description":"Incorpate the annotation in the analysis",
                    "type":"boolean"
                }
            }
        }
    },
    "properties":{
        "panel":{"$ref":"panel.json"},
        "annotation_levels":{
            "type":"array",
            "description":"A list of all the expected annotations to for analysis",
            "items":{"$ref":"#/definitions/annotation_type"}
        },
        "samples":{
            "type":"array",
            "description":"One mass cytometry sample.",
            "items":{
                "type":"object",
                "properties":{
                    "sample_name":{
                        "title":"Sample Name",
                        "type":"string"
                    },
                    "sample_display_name":{
                        "title":"Sample Display Name",
                        "type":["string","null"]
                    },
                    "include_sample":{
                        "title":"Include (default TRUE)",
                        "type":"boolean",
                        "default":true
                    },
                    "fcs_file":{
                        "title":"FCS File",
                        "allOf":[
                            {"$ref":"#/definitions/file"},
                            {
                                "type":"object",
                                "description":"The FCS file.",
                                "properties":{
                                    "suffix":{
                                        "type":"string",
                                        "const":".fcs"
                                    }
                                }
                            }
                        ]
                    },
                    "sample_annotations":{
                        "type":"array",
                        "items":{"$ref":"#/definitions/annotation_type"}
                    }
                },
                "additionalProperties":false,
                "required":["sample_name","sample_display_name","include_sample","fcs_file","sample_annotations"]
            },
            "parameters":{
                "type":"object",
                "description":"Values to describe the input data",
                "properties":{
                    "template_generation_pipeline_version":{
                        "description":"Version of the pipeline used to generate the template",
                        "type":"string"
                    },
                    "template_ingestion_pipeline_version":{
                        "description":"Version of the pipeline used to ingest the template",
                        "type":"string"
                    }
                },
                "additionalProperties":false
            }
        }
    },
    "additionalProperties":false,
    "required":["panel","annotation_levels","samples","meta"]
}
